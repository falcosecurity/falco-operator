# Test: Falco instance deployed as a Deployment.
# Verifies the operator creates a Deployment with the specified replicas and pods become ready.
apiVersion: chainsaw.kyverno.io/v1alpha1
kind: Test
metadata:
  name: falco-deployment
spec:
  description: Test Falco instance deployed as a Deployment
  bindings:
    - name: falco_name
      value: falco-test
    - name: falco_version
      value: "0.43.0"
    - name: falco_replicas
      value: 1
  steps:
    - name: Create Falco instance as Deployment
      use:
        template: ../common/_step_templates/apply-assert-falco-deployment.yaml
    - name: Wait for Falco pod to be ready
      use:
        template: ../common/_step_templates/wait-falco-pod-ready.yaml
